"use strict";window.onload=function(){function e(e){return document.querySelector(e).value}var t=document.querySelector(".notepad-add-button .add"),o=document.querySelector(".main__notepad-add-popup .notepad__close-button"),n=document.querySelector(".main__notepad-add-popup"),a=document.querySelector(".main__notepad-add-popup .form-add .add");t.addEventListener("click",function(e){n.classList.contains("notepad-popup--close")&&(n.classList.remove("notepad-popup--close"),n.classList.add("notepad-popup--open"))}),o.addEventListener("click",function(){e(".main__notepad-add-popup .form-add .form-text")?!0===confirm("Вы точно хотите закрыть форму добавления заметки?")&&(n.classList.remove("notepad-popup--open"),n.classList.add("notepad-popup--close")):(n.classList.remove("notepad-popup--open"),n.classList.add("notepad-popup--close"))}),a.addEventListener("click",function(){if(e(".main__notepad-add-popup .form-add .form-text")){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&404===t.status&&alert("Запись не добавилась, исполняемый файл не найден"),t.readyState===XMLHttpRequest.DONE&&504===t.status&&alert("Запись не добавилась, долгое исполнение файла"),t.readyState===XMLHttpRequest.DONE&&200===t.status){var o=document.querySelector(".main__notepad-notes .container"),a=document.createElement("div");a.className="note",a.innerHTML='<div class="note-text" id="'+o.length+'1">\n                            <p class="text">'+e(".main__notepad-add-popup .form-add .form-text")+'</p>\n                        </div>\n\n                        <div class="note-button-edit">\n                            <a class="button blue-button edit"><i class="fa fa-edit"></i></a>\n                        </div>\n                        <div class="note-button-remove">\n                            <a class="button red-button delete"><i class="fa fa-remove"></i></a>\n                        </div>',o.append(a),n.classList.remove("notepad-popup--open"),n.classList.add("notepad-popup--close")}},t.responseType="json",t.open("post","ajax/addNote.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("text="+e(".main__notepad-add-popup .form-add .form-text"))}else alert("Вы ничего не ввели!")});var p=document.querySelectorAll(".note-button-edit"),d=document.querySelector(".main__notepad-edit-popup .notepad__close-button"),s=document.querySelector(".main__notepad-edit-popup"),i=document.querySelector(".main__notepad-edit-popup .form-text"),r=document.querySelector(".main__notepad-edit-popup .form-edit .edit"),c="";p.forEach(function(e){e.addEventListener("click",function(){s.classList.contains("notepad-popup--close")&&(i.value=this.parentNode.children[0].children[0].textContent,c=this.parentNode.children[0].children[0],s.classList.remove("notepad-popup--close"),s.classList.add("notepad-popup--open"))})}),d.addEventListener("click",function(){e(".main__notepad-edit-popup .form-edit .form-text")!==c.textContent?!0===confirm("Вы точно хотите закрыть форму изменения заметки?")&&(s.classList.remove("notepad-popup--open"),s.classList.add("notepad-popup--close")):(s.classList.remove("notepad-popup--open"),s.classList.add("notepad-popup--close"))}),r.addEventListener("click",function(){if(e(".main__notepad-edit-popup .form-edit .form-text")!==c.textContent&&""!==e(".main__notepad-edit-popup .form-edit .form-text")){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&404===t.status&&alert("Запись не изменилась, исполняемый файл не найден"),t.readyState===XMLHttpRequest.DONE&&504===t.status&&alert("Запись не изменилась, долгое исполнение файла"),t.readyState===XMLHttpRequest.DONE&&200===t.status&&(c.textContent=e(".main__notepad-edit-popup .form-edit .form-text"),s.classList.remove("notepad-popup--open"),s.classList.add("notepad-popup--close"))},t.responseType="json",t.open("post","ajax/editNote.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("id="+this.parentNode.id+"text="+e(".main__notepad-edit-popup .form-edit .form-text"))}else alert("Вы ничего не ввели или текст не отличается от исходного!")}),document.querySelectorAll(".note-button-remove").forEach(function(e){e.addEventListener("click",function(){if(!0===confirm("Вы точно хотите удалить эту запись?")){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&404===t.status&&alert("Запись не удалилась, исполняемый файл не найден"),t.readyState===XMLHttpRequest.DONE&&504===t.status&&alert("Запись не удалилась, долгое исполнение файла"),t.readyState===XMLHttpRequest.DONE&&200===t.status&&document.querySelector(".main__notepad-notes .container").removeChild(e.parentNode)},t.responseType="json",t.open("post","ajax/removeNote.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("id="+this.parentNode.id)}})})};